<!DOCTYPE html>

<html>

<head>

<meta charset="utf-8" />
<meta name="generator" content="pandoc" />
<meta http-equiv="X-UA-Compatible" content="IE=EDGE" />

<meta name="viewport" content="width=device-width, initial-scale=1" />



<title>TVMVP: Overview and Getting Started</title>

<script>// Pandoc 2.9 adds attributes on both header and div. We remove the former (to
// be compatible with the behavior of Pandoc < 2.8).
document.addEventListener('DOMContentLoaded', function(e) {
  var hs = document.querySelectorAll("div.section[class*='level'] > :first-child");
  var i, h, a;
  for (i = 0; i < hs.length; i++) {
    h = hs[i];
    if (!/^h[1-6]$/i.test(h.tagName)) continue;  // it should be a header h1-h6
    a = h.attributes;
    while (a.length > 0) h.removeAttribute(a[0].name);
  }
});
</script>

<style type="text/css">
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
span.underline{text-decoration: underline;}
div.column{display: inline-block; vertical-align: top; width: 50%;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
</style>



<style type="text/css">
code {
white-space: pre;
}
.sourceCode {
overflow: visible;
}
</style>
<style type="text/css" data-origin="pandoc">
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
div.sourceCode { margin: 1em 0; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { display: inline-block; text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
{ counter-reset: source-line 0; }
pre.numberSource code > span
{ position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
{ content: counter(source-line);
position: relative; left: -1em; text-align: right; vertical-align: baseline;
border: none; display: inline-block;
-webkit-touch-callout: none; -webkit-user-select: none;
-khtml-user-select: none; -moz-user-select: none;
-ms-user-select: none; user-select: none;
padding: 0 4px; width: 4em;
color: #aaaaaa;
}
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa; padding-left: 4px; }
div.sourceCode
{ }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } 
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.at { color: #7d9029; } 
code span.bn { color: #40a070; } 
code span.bu { color: #008000; } 
code span.cf { color: #007020; font-weight: bold; } 
code span.ch { color: #4070a0; } 
code span.cn { color: #880000; } 
code span.co { color: #60a0b0; font-style: italic; } 
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.do { color: #ba2121; font-style: italic; } 
code span.dt { color: #902000; } 
code span.dv { color: #40a070; } 
code span.er { color: #ff0000; font-weight: bold; } 
code span.ex { } 
code span.fl { color: #40a070; } 
code span.fu { color: #06287e; } 
code span.im { color: #008000; font-weight: bold; } 
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } 
code span.kw { color: #007020; font-weight: bold; } 
code span.op { color: #666666; } 
code span.ot { color: #007020; } 
code span.pp { color: #bc7a00; } 
code span.sc { color: #4070a0; } 
code span.ss { color: #bb6688; } 
code span.st { color: #4070a0; } 
code span.va { color: #19177c; } 
code span.vs { color: #4070a0; } 
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } 
</style>
<script>
// apply pandoc div.sourceCode style to pre.sourceCode instead
(function() {
  var sheets = document.styleSheets;
  for (var i = 0; i < sheets.length; i++) {
    if (sheets[i].ownerNode.dataset["origin"] !== "pandoc") continue;
    try { var rules = sheets[i].cssRules; } catch (e) { continue; }
    var j = 0;
    while (j < rules.length) {
      var rule = rules[j];
      // check if there is a div.sourceCode rule
      if (rule.type !== rule.STYLE_RULE || rule.selectorText !== "div.sourceCode") {
        j++;
        continue;
      }
      var style = rule.style.cssText;
      // check if color or background-color is set
      if (rule.style.color === '' && rule.style.backgroundColor === '') {
        j++;
        continue;
      }
      // replace div.sourceCode by a pre.sourceCode rule
      sheets[i].deleteRule(j);
      sheets[i].insertRule('pre.sourceCode{' + style + '}', j);
    }
  }
})();
</script>




<style type="text/css">body {
background-color: #fff;
margin: 1em auto;
max-width: 700px;
overflow: visible;
padding-left: 2em;
padding-right: 2em;
font-family: "Open Sans", "Helvetica Neue", Helvetica, Arial, sans-serif;
font-size: 14px;
line-height: 1.35;
}
#TOC {
clear: both;
margin: 0 0 10px 10px;
padding: 4px;
width: 400px;
border: 1px solid #CCCCCC;
border-radius: 5px;
background-color: #f6f6f6;
font-size: 13px;
line-height: 1.3;
}
#TOC .toctitle {
font-weight: bold;
font-size: 15px;
margin-left: 5px;
}
#TOC ul {
padding-left: 40px;
margin-left: -1.5em;
margin-top: 5px;
margin-bottom: 5px;
}
#TOC ul ul {
margin-left: -2em;
}
#TOC li {
line-height: 16px;
}
table {
margin: 1em auto;
border-width: 1px;
border-color: #DDDDDD;
border-style: outset;
border-collapse: collapse;
}
table th {
border-width: 2px;
padding: 5px;
border-style: inset;
}
table td {
border-width: 1px;
border-style: inset;
line-height: 18px;
padding: 5px 5px;
}
table, table th, table td {
border-left-style: none;
border-right-style: none;
}
table thead, table tr.even {
background-color: #f7f7f7;
}
p {
margin: 0.5em 0;
}
blockquote {
background-color: #f6f6f6;
padding: 0.25em 0.75em;
}
hr {
border-style: solid;
border: none;
border-top: 1px solid #777;
margin: 28px 0;
}
dl {
margin-left: 0;
}
dl dd {
margin-bottom: 13px;
margin-left: 13px;
}
dl dt {
font-weight: bold;
}
ul {
margin-top: 0;
}
ul li {
list-style: circle outside;
}
ul ul {
margin-bottom: 0;
}
pre, code {
background-color: #f7f7f7;
border-radius: 3px;
color: #333;
white-space: pre-wrap; 
}
pre {
border-radius: 3px;
margin: 5px 0px 10px 0px;
padding: 10px;
}
pre:not([class]) {
background-color: #f7f7f7;
}
code {
font-family: Consolas, Monaco, 'Courier New', monospace;
font-size: 85%;
}
p > code, li > code {
padding: 2px 0px;
}
div.figure {
text-align: center;
}
img {
background-color: #FFFFFF;
padding: 2px;
border: 1px solid #DDDDDD;
border-radius: 3px;
border: 1px solid #CCCCCC;
margin: 0 5px;
}
h1 {
margin-top: 0;
font-size: 35px;
line-height: 40px;
}
h2 {
border-bottom: 4px solid #f7f7f7;
padding-top: 10px;
padding-bottom: 2px;
font-size: 145%;
}
h3 {
border-bottom: 2px solid #f7f7f7;
padding-top: 10px;
font-size: 120%;
}
h4 {
border-bottom: 1px solid #f7f7f7;
margin-left: 8px;
font-size: 105%;
}
h5, h6 {
border-bottom: 1px solid #ccc;
font-size: 105%;
}
a {
color: #0033dd;
text-decoration: none;
}
a:hover {
color: #6666ff; }
a:visited {
color: #800080; }
a:visited:hover {
color: #BB00BB; }
a[href^="http:"] {
text-decoration: underline; }
a[href^="https:"] {
text-decoration: underline; }

code > span.kw { color: #555; font-weight: bold; } 
code > span.dt { color: #902000; } 
code > span.dv { color: #40a070; } 
code > span.bn { color: #d14; } 
code > span.fl { color: #d14; } 
code > span.ch { color: #d14; } 
code > span.st { color: #d14; } 
code > span.co { color: #888888; font-style: italic; } 
code > span.ot { color: #007020; } 
code > span.al { color: #ff0000; font-weight: bold; } 
code > span.fu { color: #900; font-weight: bold; } 
code > span.er { color: #a61717; background-color: #e3d2d2; } 
</style>




</head>

<body>




<h1 class="title toc-ignore">TVMVP: Overview and Getting Started</h1>



<div id="time-varying-minimum-variance-portfolio-tvmvp" class="section level1">
<h1>Time-Varying Minimum Variance Portfolio (TVMVP)</h1>
<p>The TVMVP package implements a method for estimating a time-dependent
covariance matrix based on time series data using principal component
analysis on kernel-weighted data. It also includes:</p>
<div id="example" class="section level2">
<h2>Example</h2>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a><span class="fu">library</span>(TVMVP)</span></code></pre></div>
<div id="simulate-data" class="section level3">
<h3>Simulate data</h3>
<p>For this example we will us simulated data, however most use cases
for this package will be using financial data. This can be accessed
using one of the many API’s available in R and elsewhere</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a><span class="fu">set.seed</span>(<span class="dv">123</span>)</span>
<span id="cb2-2"><a href="#cb2-2" tabindex="-1"></a>uT <span class="ot">&lt;-</span> <span class="dv">100</span>  <span class="co"># Number of time periods</span></span>
<span id="cb2-3"><a href="#cb2-3" tabindex="-1"></a>up <span class="ot">&lt;-</span> <span class="dv">20</span>   <span class="co"># Number of assets</span></span>
<span id="cb2-4"><a href="#cb2-4" tabindex="-1"></a>returns <span class="ot">&lt;-</span> <span class="fu">matrix</span>(<span class="fu">rnorm</span>(uT <span class="sc">*</span> up, <span class="at">mean =</span> <span class="fl">0.001</span>, <span class="at">sd =</span> <span class="fl">0.02</span>), <span class="at">ncol =</span> up)</span></code></pre></div>
</div>
</div>
<div id="determine-optimal-number-of-factors-and-run-hypothesis-test" class="section level2">
<h2>Determine optimal number of factors and run hypothesis test</h2>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a>m <span class="ot">&lt;-</span> <span class="fu">determine_factors</span>(<span class="at">returns =</span> returns, <span class="at">max_m =</span> <span class="dv">10</span>, <span class="at">bandwidth =</span> <span class="fu">silverman</span>(returns))<span class="sc">$</span>optimal_m</span>
<span id="cb3-2"><a href="#cb3-2" tabindex="-1"></a>m</span>
<span id="cb3-3"><a href="#cb3-3" tabindex="-1"></a><span class="co">#&gt; [1] 1</span></span>
<span id="cb3-4"><a href="#cb3-4" tabindex="-1"></a>hypothesis_test <span class="ot">&lt;-</span> <span class="fu">hyptest1</span>(<span class="at">returns =</span> returns,</span>
<span id="cb3-5"><a href="#cb3-5" tabindex="-1"></a>                            <span class="at">m =</span> m,</span>
<span id="cb3-6"><a href="#cb3-6" tabindex="-1"></a>                            <span class="at">B =</span> <span class="dv">10</span>, <span class="co"># Use larger B in practice</span></span>
<span id="cb3-7"><a href="#cb3-7" tabindex="-1"></a>                            <span class="at">kernel_func =</span> epanechnikov_kernel)</span>
<span id="cb3-8"><a href="#cb3-8" tabindex="-1"></a><span class="co">#&gt; J_pT = 34.7556, p-value = 0.0000: Strong evidence that the covariance is time-varying.</span></span></code></pre></div>
<p>The function <code>determine_factors</code> uses a BIC-type
information criterion in order to determine the optimal number of
factors to be used in the model. More information can be seen in section
2.2 of the thesis. The input variables are the data matrix
<code>returns</code>, the max number of factors to be tested
<code>max_m</code>, and the bandwidth to be used <code>bandwidth</code>.
The package offers the functionality of computing the bandwidth using
Silverman’s rule of thumb with the function <code>silverman()</code>,
however other methods could be used. The function outputs the optimal
number of factors <code>optimal_m</code>, and the values of the
information criteria for the different number of factors
<code>IC_values</code>.</p>
<p><code>hyptest1</code> implements the hypothesis test of constant
factor loadings introduced by Su &amp; Wong (2017). Under some
conditions, the test statistic <span class="math inline">\(J\)</span>
follows a standard normal distribution under the null. However, the test
have been proven to be somewhat unreliable in finite sample usage, which
is why the option of computing a bootstrap p-value is included. More
information can be found in section 2.3 in the thesis. The function take
the input: a data matrix of multiple time series <code>returns</code>,
the number of factors <code>m</code>, the number of bootstrap
replications <code>B</code>, and the kernel function
<code>kernel_func.</code> The package offers the Epanechnikov kernel,
however others could also be used.</p>
</div>
<div id="portfolio-optimization" class="section level2">
<h2>Portfolio optimization</h2>
<p>The package offers two functions for the purpose of portfolio
estimation and evaluation: <code>rolling_time_varying_mvp</code> which
implements a rolling window in order to evaluate the performance of a
minimum variance portfolio implemented using the time-varying covariance
matrix, and <code>predict_portfolio</code> which implements an out of
sample prediction of the portfolio.</p>
<p>Note that these functions expect log returns and log risk free
rates.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a>mvp_result <span class="ot">&lt;-</span> <span class="fu">rolling_time_varying_mvp</span>(</span>
<span id="cb4-2"><a href="#cb4-2" tabindex="-1"></a>  <span class="at">returns        =</span> returns,</span>
<span id="cb4-3"><a href="#cb4-3" tabindex="-1"></a>  <span class="at">initial_window =</span> <span class="dv">60</span>,</span>
<span id="cb4-4"><a href="#cb4-4" tabindex="-1"></a>  <span class="at">rebal_period   =</span> <span class="dv">5</span>,</span>
<span id="cb4-5"><a href="#cb4-5" tabindex="-1"></a>  <span class="at">max_factors    =</span> <span class="dv">10</span>,</span>
<span id="cb4-6"><a href="#cb4-6" tabindex="-1"></a>  <span class="at">return_type    =</span> <span class="st">&quot;daily&quot;</span>,</span>
<span id="cb4-7"><a href="#cb4-7" tabindex="-1"></a>  <span class="at">kernel_func    =</span> epanechnikov_kernel,</span>
<span id="cb4-8"><a href="#cb4-8" tabindex="-1"></a>  <span class="at">rf             =</span> <span class="fl">1e-04</span></span>
<span id="cb4-9"><a href="#cb4-9" tabindex="-1"></a>)</span>
<span id="cb4-10"><a href="#cb4-10" tabindex="-1"></a>mvp_result</span>
<span id="cb4-11"><a href="#cb4-11" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb4-12"><a href="#cb4-12" tabindex="-1"></a><span class="co">#&gt; ── Rolling Window Portfolio Analysis ───────────────────────────────────────────</span></span>
<span id="cb4-13"><a href="#cb4-13" tabindex="-1"></a><span class="co">#&gt; ────────────────────────────────────────────────────────────────────────────────</span></span>
<span id="cb4-14"><a href="#cb4-14" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb4-15"><a href="#cb4-15" tabindex="-1"></a><span class="co">#&gt; ── Summary Metrics ──</span></span>
<span id="cb4-16"><a href="#cb4-16" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb4-17"><a href="#cb4-17" tabindex="-1"></a><span class="co">#&gt;        Method     CER      MER       SD     SR MER_ann  SD_ann</span></span>
<span id="cb4-18"><a href="#cb4-18" tabindex="-1"></a><span class="co">#&gt;         TVMVP 0.07378 0.001845 0.006332 0.2913  0.4648 0.10051</span></span>
<span id="cb4-19"><a href="#cb4-19" tabindex="-1"></a><span class="co">#&gt;  Equal Weight 0.07347 0.001837 0.004648 0.3952  0.4628 0.07378</span></span>
<span id="cb4-20"><a href="#cb4-20" tabindex="-1"></a><span class="co">#&gt; ────────────────────────────────────────────────────────────────────────────────</span></span>
<span id="cb4-21"><a href="#cb4-21" tabindex="-1"></a><span class="co">#&gt; ── Detailed Components ──</span></span>
<span id="cb4-22"><a href="#cb4-22" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb4-23"><a href="#cb4-23" tabindex="-1"></a><span class="co">#&gt; The detailed portfolio outputs are stored in the following elements:</span></span>
<span id="cb4-24"><a href="#cb4-24" tabindex="-1"></a><span class="co">#&gt; - Time-Varying MVP: Access via `$TVMVP`</span></span>
<span id="cb4-25"><a href="#cb4-25" tabindex="-1"></a><span class="co">#&gt; - Equal Weight: Access via `$Equal`</span></span>
<span id="cb4-26"><a href="#cb4-26" tabindex="-1"></a><span class="fu">plot</span>(mvp_result)</span></code></pre></div>
<p><img role="img" src="data:image/png;base64,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" /><!-- --></p>
<p>The <code>rolling_time_varying_mvp</code> function takes the input:
<code>returns</code> a <span class="math inline">\(T\times p\)</span>
data matrix of log returns, <code>initial_window</code> which is the
initial holding window used for estimation, <code>rebal_period</code>
which is the length of the rebalancing period to be used in the
evaluation, <code>max_factors</code> used in the determination of the
optimal number of factors, <code>return_type</code> can be set to
“daily”, “weekly”, and “monthly”, and is used for annualization of the
results, <code>kernel_func</code>, and <code>rf</code> which denotes the
risk free rate, this can be input either as a scalar or at <span class="math inline">\((T-initial\_window)\times1\)</span> numerical
vector. The function outputs relevant metrics for evaluation of the
performance of the portfolio such as cumulative log excess returns,
standard deviation, and Sharpe ratio.</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a>prediction <span class="ot">&lt;-</span> <span class="fu">predict_portfolio</span>(<span class="at">returns =</span> returns, </span>
<span id="cb5-2"><a href="#cb5-2" tabindex="-1"></a>                                <span class="at">horizon =</span> <span class="dv">21</span>, </span>
<span id="cb5-3"><a href="#cb5-3" tabindex="-1"></a>                                <span class="at">max_factors =</span> <span class="dv">10</span>,</span>
<span id="cb5-4"><a href="#cb5-4" tabindex="-1"></a>                                <span class="at">kernel_func =</span> epanechnikov_kernel,</span>
<span id="cb5-5"><a href="#cb5-5" tabindex="-1"></a>                                <span class="at">min_return=</span><span class="fl">0.5</span>,</span>
<span id="cb5-6"><a href="#cb5-6" tabindex="-1"></a>                                <span class="at">max_SR =</span> <span class="cn">TRUE</span>,</span>
<span id="cb5-7"><a href="#cb5-7" tabindex="-1"></a>                                <span class="at">rf =</span> <span class="fl">1e-04</span>)</span>
<span id="cb5-8"><a href="#cb5-8" tabindex="-1"></a>prediction</span>
<span id="cb5-9"><a href="#cb5-9" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb5-10"><a href="#cb5-10" tabindex="-1"></a><span class="co">#&gt; ── Portfolio Optimization Predictions ──────────────────────────────────────────</span></span>
<span id="cb5-11"><a href="#cb5-11" tabindex="-1"></a><span class="co">#&gt; ────────────────────────────────────────────────────────────────────────────────</span></span>
<span id="cb5-12"><a href="#cb5-12" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb5-13"><a href="#cb5-13" tabindex="-1"></a><span class="co">#&gt; ── Summary Metrics ──</span></span>
<span id="cb5-14"><a href="#cb5-14" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb5-15"><a href="#cb5-15" tabindex="-1"></a><span class="co">#&gt;                        Method expected_return    risk sharpe</span></span>
<span id="cb5-16"><a href="#cb5-16" tabindex="-1"></a><span class="co">#&gt;    Minimum Variance Portfolio         0.03146 0.01843 0.3725</span></span>
<span id="cb5-17"><a href="#cb5-17" tabindex="-1"></a><span class="co">#&gt;          Maximum SR Portfolio         0.06678 0.02685 0.5427</span></span>
<span id="cb5-18"><a href="#cb5-18" tabindex="-1"></a><span class="co">#&gt;  Return-Constrained Portfolio         0.50000 0.25972 0.4201</span></span>
<span id="cb5-19"><a href="#cb5-19" tabindex="-1"></a><span class="co">#&gt; ────────────────────────────────────────────────────────────────────────────────</span></span>
<span id="cb5-20"><a href="#cb5-20" tabindex="-1"></a><span class="co">#&gt; ── Detailed Components ──</span></span>
<span id="cb5-21"><a href="#cb5-21" tabindex="-1"></a><span class="co">#&gt; </span></span>
<span id="cb5-22"><a href="#cb5-22" tabindex="-1"></a><span class="co">#&gt; The detailed portfolio outputs are stored in the following elements:</span></span>
<span id="cb5-23"><a href="#cb5-23" tabindex="-1"></a><span class="co">#&gt; - GMV: Use object$GMV</span></span>
<span id="cb5-24"><a href="#cb5-24" tabindex="-1"></a><span class="co">#&gt; - Maximum Sharpe Ratio Portfolio: Use object$max_SR</span></span>
<span id="cb5-25"><a href="#cb5-25" tabindex="-1"></a><span class="co">#&gt; - Minimum Variance Portfolio with Return Constraint: Use</span></span>
<span id="cb5-26"><a href="#cb5-26" tabindex="-1"></a><span class="co">#&gt; object$MinVarWithReturnConstraint</span></span></code></pre></div>
<p>The <code>predict_portfolio</code> functions makes out of sample
predictions of the portfolio performance. The functions offers three
different methods of portfolio optimization: Minimum variance, Minimum
variance with minimum returns constraint, and maximum Sharpe ratio
portfolio. The minimum variance portfolio is the default portfolio and
will always be computed when running this function. The minimum returns
constraint is set by imputing some <code>min_return</code>-value when
running the function, important to note is that the minimum return
constraint is set for the entire horizon and is not a daily constraint.
The maximum SR portfolio is computed when <code>max_SR</code> is set to
<code>TRUE</code>.</p>
</div>
<div id="covariance-matrix-estimation" class="section level2">
<h2>Covariance matrix estimation</h2>
<p>If the pre-built functions does not fit your purpose, you can utilize
the covariance function by running:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a>cov_mat <span class="ot">&lt;-</span> <span class="fu">time_varying_cov</span>(returns,</span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a>                            m,</span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a>                            <span class="at">bandwidth =</span> <span class="fu">silverman</span>(returns),</span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a>                            <span class="at">kernel_func =</span> epanechnikov_kernel,</span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a>                            <span class="at">M0 =</span> <span class="dv">10</span>,</span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a>                            <span class="at">rho_grid =</span> <span class="fu">seq</span>(<span class="fl">0.005</span>, <span class="dv">2</span>, <span class="at">length.out =</span> <span class="dv">30</span>),</span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a>                            <span class="at">floor_value =</span> <span class="fl">1e-12</span>,</span>
<span id="cb6-8"><a href="#cb6-8" tabindex="-1"></a>                            <span class="at">epsilon2 =</span> <span class="fl">1e-6</span>,</span>
<span id="cb6-9"><a href="#cb6-9" tabindex="-1"></a>                            <span class="at">full_output =</span> <span class="cn">FALSE</span>)</span>
<span id="cb6-10"><a href="#cb6-10" tabindex="-1"></a>  </span></code></pre></div>
<p>Which outputs the covariance matrix weighted around the last
observation in returns.</p>
</div>
<div id="references" class="section level2">
<h2>References</h2>

</div>
</div>



<!-- code folding -->


<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    script.src  = "https://mathjax.rstudio.com/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML";
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>

</body>
</html>
